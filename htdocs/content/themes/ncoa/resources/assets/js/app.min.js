var app=angular.module("ncoa",["ngAnimate","ngRoute","LocalStorageModule","ui.router","angular-loading-bar"]);app.config(["cfpLoadingBarProvider",function(a){a.includeSpinner=!1}]),app.config(function(a){a.setStorageType("sessionStorage")}),app.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("prescreen",{url:"/",templateUrl:"/content/themes/ncoa/resources/views/pages/benefits-checkup/prescreen/prescreen.questions.html?"+new Date,controller:"preScreenController"}).state("prescreen.questions",{url:"prescreen/questions",templateUrl:"/content/themes/ncoa/resources/views/pages/benefits-checkup/prescreen/prescreen.questions.html?"+new Date,controller:"preScreenController"}).state("prescreen.results",{url:"prescreen/results",templateUrl:"/content/themes/ncoa/resources/views/pages/benefits-checkup/prescreen/prescreen.results.html?"+new Date,controller:"preScreenResultsController"}).state("questionnaire.initial-results",{url:"/results/initial",templateUrl:"/content/themes/ncoa/resources/views/pages/benefits-checkup/questionnaire/questionnaire.initial-results.html?"+new Date,controller:"questionnairePrescreenResultsController",data:{next:"questionnaire.basics",prev:"/"}}).state("questionnaire",{url:"/questionnaire",templateUrl:"/content/themes/ncoa/resources/views/pages/benefits-checkup/questionnaire/questionnaire.html?"+new Date,controller:"questionnaireController",data:{next:"questionnaire.health",prev:"prescreen.results"}}).state("questionnaire.basics",{url:"/basics",templateUrl:"/content/themes/ncoa/resources/views/pages/benefits-checkup/questionnaire/questionnaire.basics.html?"+new Date,controller:"questionnaireBasicController",data:{next:"questionnaire.health",prev:"prescreen.results"}}).state("questionnaire.health",{url:"/health",templateUrl:"/content/themes/ncoa/resources/views/pages/benefits-checkup/questionnaire/questionnaire.health.html?"+new Date,controller:"questionnaireHealthController",data:{next:"questionnaire.household",prev:"questionnaire.basics"}}).state("questionnaire.household",{url:"/household",templateUrl:"/content/themes/ncoa/resources/views/pages/benefits-checkup/questionnaire/questionnaire.household.html?"+new Date,controller:"questionnaireHouseholdController",data:{next:"questionnaire.finances",prev:"questionnaire.health"}}).state("questionnaire.finances",{url:"/finances",templateUrl:"/content/themes/ncoa/resources/views/pages/benefits-checkup/questionnaire/questionnaire.finances.html?"+new Date,controller:"questionnaireFinancesController",data:{next:"questionnaire.finances-income",prev:"questionnaire.household"}}).state("questionnaire.finances-income",{url:"/finances/income",templateUrl:"/content/themes/ncoa/resources/views/pages/benefits-checkup/questionnaire/questionnaire.finances.income.html?"+new Date,controller:"questionnaireFinancesController",data:{next:"questionnaire.finances-income-grid",prev:"questionnaire.finances"}}).state("questionnaire.finances-income-grid",{url:"/finances/income-grid",templateUrl:"/content/themes/ncoa/resources/views/pages/benefits-checkup/questionnaire/questionnaire.finances.income-grid.html?"+new Date,controller:"questionnaireFinancesController",data:{next:"questionnaire.finances-assets",prev:"questionnaire.finances-income"}}).state("questionnaire.finances-assets",{url:"/finances/assets",templateUrl:"/content/themes/ncoa/resources/views/pages/benefits-checkup/questionnaire/questionnaire.finances.assets.html?"+new Date,controller:"questionnaireFinancesController",data:{next:"questionnaire.finances-assets-grid",prev:"questionnaire.finances-income-grid"}}).state("questionnaire.finances-assets-grid",{url:"/finances/assets-grid",templateUrl:"/content/themes/ncoa/resources/views/pages/benefits-checkup/questionnaire/questionnaire.finances.assets-grid.html?"+new Date,controller:"questionnaireFinancesController",data:{next:"questionnaire.loader",prev:"questionnaire.finances-assets"}}).state("questionnaire.results",{url:"/results",templateUrl:"/content/themes/ncoa/resources/views/pages/benefits-checkup/questionnaire/questionnaire.results.html?"+new Date,controller:"questionnaireResultsController",data:{next:"",prev:"questionnaire.finances-assets-grid"}}).state("questionnaire.loader",{url:"/loader",templateUrl:"/content/themes/ncoa/resources/views/pages/loader.html?"+new Date,controller:"questionnaireLoaderController",data:{next:"",prev:""}}).state("fact-sheets",{url:"/fact-sheets/:programCode/:stateId/:short/:zipcode",templateUrl:function(a){return"y"==a.short?"/fact-sheets/factsheet_"+a.programCode+"/?state="+a.stateId+"&short_layout=y&short=y&zipcode="+a.zipcode:"/fact-sheets/factsheet_"+a.programCode+"/?state="+a.stateId+"&short_layout=y&zipcode="+a.zipcode}}).state("screening-start",{url:"/screening-start",controller:"screeningController"}).state("screening",{url:"/screening/:category/:state",templateUrl:"/content/themes/ncoa/resources/views/pages/benefits-checkup/screening/screening.html?"+new Date,controller:"screeningController",data:{next:"",prev:""}})}]).run(["$rootScope",function(a){a.$on("$stateChangeSuccess",function(a,b,c,d,e){var f=document.querySelector("body");void 0!=f&&$("html,body").animate({scrollTop:$(f).offset().top+"px"},0)})}]),app.directive("completeQuestionnaire",["$state","$window","prescreen",function(a,b,c){return{restrict:"E",template:'<a ng-click="completeFQ()" class="btn btn-primary">{{caption}}</a>',replace:!0,link:function(d,e){var f=0!=Object.keys(c.data.answers).length;f?d.caption="Continue to Full Questionnaire":d.caption="Start Questionnaire",d.completeFQ=function(c){f?a.go("screening-start"):b.location.href="/find-my-benefits"}}}}]),app.directive("selector",[function(){return{link:function(a,b){$(b).click(function(){$(b).hasClass("checked")?$(b).removeClass("checked"):$(b).addClass("checked")})}}}]),app.factory("Months",[function(){return[{id:1,name:"January"},{id:2,name:"February"},{id:3,name:"March"},{id:4,name:"April"},{id:5,name:"May"},{id:6,name:"June"},{id:7,name:"July"},{id:8,name:"August"},{id:9,name:"September"},{id:10,name:"October"},{id:11,name:"November"},{id:12,name:"December"}]}]),app.factory("CronicConditions",[function(){var a={},b=[{id:"chroniccondition_no",name:"No Chronic Conditions"},{id:"chroniccondition_1",name:"One Chronic Condition"},{id:"chroniccondition_2_more",name:"Two or More Chronic Conditions"}];return a.getCronicConditions=function(){return b},a.getByCode=function(a){for(var c=0;c<b.length;c++)if(b[c].id==a)return b[c].name;return""},a}]),app.factory("AnswersByCategories",[function(){var a={},b={};return a.getCategory=function(a){return b[a]},a.setCategory=function(a,c,d){b[a]={category:c,type:d}},a}]),app.factory("Income",[function(){var a={},b=[{title:"Social Security Retirement and Survivor Benefits",code:"ss_retire",unearned:!0,description:"Income you get from Social Security."},{title:"Social Security Disability",code:"ss_disable",unearned:!0,description:"Social Security Disability Insurance (SSDI) is a cash benefit you and certain members of your family may get if you worked long enough and paid Social Security taxes."},{title:"Supplemental Security Income",code:"ssi",unearned:!0,description:"Supplemental Security Income (SSI) is a cash benefit you may get if you have limited income and resources, and are 65 years of age or older, disabled or blind."},{title:"Pension and Retirement Benefits",code:"pri_retire",unearned:!0,description:"A Pension or Retirement Benefit is a fixed amount of money based on the number of years you worked and how much you earned at jobs you have had."},{title:"Work Income",code:"earned",unearned:!1,description:"Income you get from a job."},{title:"Dividends and Interest",code:"dividends",unearned:!0,description:"Dividends are amounts of money, stock, or other property paid to you by a corporation. Interest income includes money you get from savings you have in banks, credit unions, and other organizations."},{title:"Veteran Benefits",code:"vet_ben",unearned:!0,description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"Cash Assistance",code:"cash_assist",unearned:!0,description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"TANF",code:"tanf",unearned:!0,description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"Unemployment Insurance",code:"unemployment",unearned:!0,description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"Railroad Retirement Benefits",code:"rr_ben",unearned:!0,description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"Workers Compensation",code:"unemploy",unearned:!0,description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"Other Non Work Income",code:"other_nw",unearned:!0,description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."}];return a.getIncomes=function(){return b},a.isUnearned=function(a){for(var c in b)if(b[c].code==a)return b[c].unearned;return!0},a}]),app.factory("category",["$state",function(a){var b={};return b.currentCategory=function(){return void 0==a.params.category?"prescreen":a.params.category},b}]),app.factory("Asset",[function(){var a={},b=[{title:"Cash and Cash Equivalent",code:"cash",description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"Primary Car",code:"auto1",description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"Value of Home",code:"home",description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"Second Car",code:"auto2",description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"Life Insurance: Face Value",code:"life_face",description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"Life Insurance: Cash Value",code:"life_cash",description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"Retirement Accounts",code:"retirement",description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"Investment Accounts",code:"stocks",description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"Burial Accounts: Irrevocable",code:"irrevocable",description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"Burial Accounts: Revocable",code:"revocable",description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."},{title:"Other Assets",code:"other_a",description:"Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression."}];return a.getAssets=function(){return b},a}]),app.directive("benefitsSlider",["$window","localStorageService",function(a,b){return{restrict:"A",link:function(c,d){function e(a){var b;return i.each(function(c){$(this).attr("id")==a&&(b=c)}),b}function f(){var a=$(".benefits-slider-icon.benefits-slider-active").parent().parent().attr("id");return $(".benefits-slider-active").removeClass(l),a}function g(a){$("style[data-benefits-slider]").remove(),$("head").append("<style data-benefits-slider>.benefits-slider-carousel:before,.benefits-slider-carousel:after{ left: "+($(a).offset().left-$(".benefits-slider-carousel").offset().left+$(a).width()/2)+"px}</style>")}function h(a){var b=i.get(a),c=j.get(a);m=a,$(b).find(".benefits-slider-icon").first().addClass(l),$(c).addClass(l),g(b),$(".benefits-slider-index").text(a+1+" of "+k)}var i=$(".benefits-slider-circle-nav>div"),j=$(".benefits-slider-carousel>.row"),k=i.length,l="benefits-slider-active",m=0;c.findBenefits=function(c){b.set("interested_category",c),a.location.href="find-my-benefits"},$(".benefits-slider-circle-nav>div").each(function(a){$(this).prop("id","benefits-slider-circle-"+a)}),$(window).resize(function(){var a=i.get(m);g(a)}),$(".benefits-slider-index").text("1 of "+k),$(".benefits-slider-arrow.fa-chevron-left").click(function(){var a,b,c;b=f(),a=e(b),c=a-1,c<0&&(c=k-1),h(c)}),$(".benefits-slider-arrow.fa-chevron-right").click(function(){var a,b,c;b=f(),a=e(b),c=a+1,c>k-1&&(c=0),h(c)}),$(".benefits-slider-circle-nav>div").click(function(){var a=$(this).attr("id"),b=e(a);f(),h(b)})}}}]),app.directive("breadcrumb",["$document","$state",function(a,b){return{restrict:"A",templateUrl:"/content/themes/ncoa/resources/views/directives/breadcrumb/breadcrumb.html?"+new Date,link:function(a,c,d){a.pages=["Basics","Health","Household","Finances","Results"],a.currentState=b.params.category,a.hideBreadCrumbs="results"==b.current.name.split(".")[1]||"initial-results"==b.current.name.split(".")[1],a.$on("$stateChangeSuccess",function(){a.hideBreadCrumbs="results"==b.current.name.split(".")[1]||"initial-results"==b.current.name.split(".")[1]})}}}]),app.directive("ncoaCarousel",[function(){return{link:function(a,b){$(".currItem").html("1"),$(".currTotal").html($(".ncoa-carousel-container .item").length),$(b).slick({autoplay:!0,autoplaySpeed:5e3,dots:!1,infinite:!0,speed:1e3,slidesToShow:3,slidesToScroll:3,nextArrow:'<span class="fa fa-chevron-right" aria-hidden="true"></span>',prevArrow:'<span class="fa fa-chevron-left" aria-hidden="true"></span>',responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!1,dots:!1,appendArrows:$(b)}},{breakpoint:1e3,settings:{slidesToShow:2,slidesToScroll:2,appendArrows:$(".controls")}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,appendArrows:$(".controls")}}]}),$(b).on("afterChange",function(a,b,c,d){$(".currItem").html(c+1)})}}}]),app.directive("grid",["$state","AnswersByCategories",function(a,b){return{restrict:"E",scope:{title:"@",description:"@",code:"@",type:"@",request:"@",answer_field:"=answerField"},templateUrl:"/content/themes/ncoa/resources/views/directives/grid/grid-tpl.html?"+new Date,link:function(c,d,e){c.category=a.params.category;var f=b.getCategory("marital_stat");switch(c.isMarital=!1,void 0!=f&&void 0!=c.$root.answers[f.category]&&void 0!=c.$root.answers[f.category].marital_stat&&("married"!=c.$root.answers[f.category].marital_stat.code&&"widowed"!=c.$root.answers[f.category].marital_stat.code||(c.isMarital=!0)),parseInt(c.type)){case 1:c.self_code="s_income_",c.spouse_code="sp_income_",c.joint_code="s_sp_income_",c.household_code="hh_income_";break;case 2:c.self_code="s_asset_",c.spouse_code="sp_asset_",c.joint_code="s_sp_asset_",c.household_code="hh_asset_";break;default:c.self_code="",c.spouse_code="",c.joint_code="",c.household_code=""}c.calcTotal=function(a){var b="hh_income_"==a||"hh_asset_"==a?"_simple":"";void 0==c.$root.answers[c.category]&&(c.$root.answers[c.category]={}),c.$root.answers[c.category][a+"total_complete"+b]=0,c.$root.answers[c.category][a+"total_unearned"+b]=0;for(var d in c.$root["grid_"+a+"_"+c.type])void 0!=c.$root.answers[c.category][a+d+b]&&(c.$root.answers[c.category][a+"total_complete"+b]=c.$root.answers[c.category][a+"total_complete"+b]+c.$root.answers[c.category][a+d+b],0==c.$root["grid_"+a+"_"+c.type][d]&&(c.$root.answers[c.category][a+"total_unearned"+b]=c.$root.answers[c.category][a+"total_unearned"+b]+c.$root.answers[c.category][a+d+b]));c.$root.answers[c.category][a+"total_earned"+b]=c.$root.answers[c.category][a+"total_complete"+b]-c.$root.answers[c.category][a+"total_unearned"+b];var e=void 0==c.$root.answers[c.category][c.self_code+"total_complete"]?0:c.$root.answers[c.category][c.self_code+"total_complete"]+0,f=void 0==c.$root.answers[c.category][c.spouse_code+"total_complete"]?0:c.$root.answers[c.category][c.spouse_code+"total_complete"]+0,g=void 0==c.$root.answers[c.category][c.joint_code+"total_complete"]?0:c.$root.answers[c.category][c.joint_code+"total_complete"]+0,h=void 0==c.$root.answers[c.category][c.household_code+"total_complete_simple"]?0:c.$root.answers[c.category][c.household_code+"total_complete_simple"]+0;c.$root.answers[c.category][c.household_code+"total_complete"]=e+f+g+h,e=void 0==c.$root.answers[c.category][c.self_code+"total_unearned"]?0:c.$root.answers[c.category][c.self_code+"total_unearned"]+0,f=void 0==c.$root.answers[c.category][c.spouse_code+"total_unearned"]?0:c.$root.answers[c.category][c.spouse_code+"total_unearned"]+0,g=void 0==c.$root.answers[c.category][c.joint_code+"total_unearned"]?0:c.$root.answers[c.category][c.joint_code+"total_unearned"]+0,h=void 0==c.$root.answers[c.category][c.household_code+"total_unearned_simple"]?0:c.$root.answers[c.category][c.household_code+"total_unearned_simple"]+0,c.$root.answers[c.category][c.household_code+"total_unearned"]=e+f+g+h,c.$root.answers[c.category][c.household_code+"total_earned"]=c.$root.answers[c.category][c.household_code+"total_complete"]-c.$root.answers[c.category][c.household_code+"total_unearned"]},c.$watch("$root.answers."+c.category+"."+c.self_code+c.answer_field.code,function(){void 0==c.$root["grid_"+c.self_code+"_"+c.type]&&(c.$root["grid_"+c.self_code+"_"+c.type]={}),c.$root["grid_"+c.self_code+"_"+c.type][c.answer_field.code]=c.answer_field.earned,c.calcTotal(c.self_code)}),c.$watch("$root.answers."+c.category+"."+c.spouse_code+c.answer_field.code,function(){void 0==c.$root["grid_"+c.spouse_code+"_"+c.type]&&(c.$root["grid_"+c.spouse_code+"_"+c.type]={}),c.$root["grid_"+c.spouse_code+"_"+c.type][c.answer_field.code]=c.answer_field.earned,c.calcTotal(c.spouse_code)}),c.$watch("$root.answers."+c.category+"."+c.joint_code+c.answer_field.code,function(){void 0==c.$root["grid_"+c.joint_code+"_"+c.type]&&(c.$root["grid_"+c.joint_code+"_"+c.type]={}),c.$root["grid_"+c.joint_code+"_"+c.type][c.answer_field.code]=c.answer_field.earned,c.calcTotal(c.joint_code)}),c.$watch("$root.answers."+c.category+"."+c.household_code+c.answer_field.code+"_simple",function(){void 0==c.$root["grid_"+c.household_code+"_"+c.type]&&(c.$root["grid_"+c.household_code+"_"+c.type]={}),c.$root["grid_"+c.household_code+"_"+c.type][c.answer_field.code]=c.answer_field.earned,c.calcTotal(c.household_code)}),c.$root.answers[c.category][c.self_code+c.code]=0,c.$root.answers[c.category][c.spouse_code+c.code]=0,c.$root.answers[c.category][c.joint_code+c.code]=0,c.$root.answers[c.category][c.household_code+c.code+"_simple"]=0}}}]),app.directive("ncoaLoader",function(){return{restrict:"E",templateUrl:"/content/themes/ncoa/resources/views/directives/loader/loader.html?"+new Date,link:function(a,b,c){}}}),app.directive("medicationSelector",["Drugs","$state",function(a,b){return{restrict:"E",scope:{answer_field:"=answerField"},templateUrl:"/content/themes/ncoa/resources/views/directives/med-selector/medication-selector.html?"+new Date,link:function(c,d){a.setDrugs(c.answer_field.options),c.category=b.params.category;for(var e=a.getDrugs(),f=0;f<e.length;f++){var g=$("<option/>",{value:e[f].code,text:e[f].display});g.appendTo($("#multiselect"))}$("#multiselect").multiSelect({selectableHeader:"<p class='bold'>Available Medications</p><input type='text' class='form-control' autocomplete='off' placeholder='Search...'>",selectionHeader:"<p class='bold'>My Medication List</p>",selectableFooter:"<button class='btn btn-secondary add' disabled>Add to My List</button>",selectionFooter:"<button class='btn btn-secondary remove' disabled>Remove from My List</button>",afterInit:function(a){var b=this,c=b.$selectableUl.prev(),d="#"+b.$container.attr("id")+" .ms-elem-selectable:not(.ms-selected)";b.qs1=c.quicksearch(d).on("keydown",function(a){if(40===a.which)return b.$selectableUl.focus(),!1})},afterSelect:function(){this.qs1.cache(),$(".ms-selectable .ms-list .selected").removeClass("selected"),$(".ms-selectable .add").attr("disabled",!0)},afterDeselect:function(a){this.qs1.cache(),$(".ms-selectable .ms-list .selected").removeClass("selected"),$(".ms-selection .remove").attr("disabled",!0)}}),$(".ms-selectable").on("click","button.add",function(){var b=$(".ms-selectable .ms-list .selected span").map(function(){return a.codeByName($(this).html())}).get();$("#multiselect").multiSelect("select",b);for(var d=0;d<b.length;d++)c.$root.answers[c.category][b[d]]="y"}),$(".ms-selection").on("click","button.remove",function(){var b=$(".ms-selection .ms-list .selected span").map(function(){return a.codeByName($(this).html())}).get();$("#multiselect").multiSelect("deselect",b);for(var d=0;d<b.length;d++)delete c.$root.answers[c.category][b[d]]})}}}]),app.directive("ncoaFooter",["$http",function(a){return{restrict:"E",scope:{url:"@"},link:function(b,c){a.get(b.url).then(function(a){console.log(a.data)}),$.ajax({url:b.url,context:document.body}).success(function(a){console.log(a)})}}}]),app.directive("ncoaForm",[function(){return{restrict:"A",link:function(a,b){a.category=window.category,a.state=window.state,a.error=!1,a.processForm=function(b,c){""==a.category&&""==a.state&&(a.error=!0,c.preventDefault())}}}}]),app.directive("ncoaPrograms",[function(){return{restrict:"A",link:function(a,b){a.programs=window.programs,a.currentProgramsList=a.programs.slice(0,10),a.pageCount=Math.ceil(a.programs.length/10),a.currentPage=0==a.pageCount?0:1,a.showPage=function(b){return b<1?a.currentPage=0==a.pageCount?0:1:b>Math.ceil(a.programs.length/10)?a.currentPage=Math.ceil(a.programs.length/10):a.currentPage=b,a.currentProgramsList=a.programs.slice(10*(a.currentPage-1),10*a.currentPage),!1}}}}]),app.directive("pageSwitch",["$rootScope","$state","prescreen","screening","saveScreening","ScreeningRoutes",function(a,b,c,d,e,f){return{link:function(g,h){"questionnaire.results"==b.current.name&&(g.isResults=!0),void 0==b.params.category?(g.prev="prescreen",g.next="screening-start"):"questionnaire.results"==b.current.name?(g.prev="finances",g.next="basics"):(g.prev=f[b.params.category].prev,g.next=f[b.params.category].next),g.switchPage=function(h){if("prescreen"==h||"screening-start"==h||"questionnaire.initial-results"==h)b.transitionTo(h);else{var i={};void 0!=d.data.results.screening.id&&(i.screening=d.data.results.screening),i.pgno=f[b.params.category].pgno,void 0!=c.data.results.screening.id&&(i.prescreen=c.data.results.screening),"questionnaire.loader"==h&&(i.lastSet="true",a.showLoader=!0,document.querySelector(".container").scrollIntoView()),i.answers=void 0==g.$root.answers[b.params.category]?{}:g.$root.answers[b.params.category],e.post(i).success(function(a,c,e,f){if("questionnaire.loader"==h){d.data.answers=g.$root.answers,d.data.results.screening=a.screening,d.data.results.found_programs=a.found_programs,d.data.results.key_programs=[];for(var i=0;i<d.data.results.found_programs.length;i++)for(var j=0;j<d.data.results.found_programs[i].programs.length;j++)if(d.data.results.found_programs[i].programs[j].key_program){var k=d.data.results.found_programs[i].programs[j];k.category=d.data.results.found_programs[i].category,d.data.results.key_programs.push(k)}d.save(),b.transitionTo("questionnaire.results")}else{d.data.results.screening=a,d.data.answers=g.$root.answers,d.save();var l=void 0==b.params.state?g.$root.prescreen.stateId:b.params.state;b.transitionTo("screening",{category:h,state:l})}})}}}}}]),app.directive("profile",["prescreen","$state","Drugs","CronicConditions",function(a,b,c,d){return{restrict:"A",templateUrl:"/content/themes/ncoa/resources/views/directives/profile/profile.html?"+new Date,link:function(b,e,f){b.screenData=a.data.screenData,b.showOptions=!1,b.cronicConditions=function(){try{return d.getByCode(void 0==b.questionnaire.request.health.chronic_condition?"":b.questionnaire.request.health.chronic_condition)}catch(a){return""}},b.drugs=function(){var a="";try{for(var d=0;d<b.questionnaire.request.health.drugs.length;d++)a=a+c.nameByCode(b.questionnaire.request.health.drugs[d])+", "}catch(b){a=""}return a.substr(0,a.length-2)},b.categories=function(){for(var a="",c=0;c<b.screenData.benefits_categories.length;c++)a=a+b.screenData.benefits_categories[c]+", ";return a.substr(0,a.length-2)}}}}]),app.directive("slideDown",[function(){return{link:function(a,b){$(b).children(".program-header").click(function(){$(b).find(".programs-container").slideToggle(),$(b).toggleClass("active")})}}}]),app.factory("questionTemplates",[function(){var a="/content/themes/ncoa/resources/views/directives/question/",b={zip:a+"zip.html",client:a+"client.html",veteran:a+"veteran.html",dob:a+"dob.html",marital_stat:a+"marital_stat.html",bcuqc_income:a+"bcuqc_income.html",bcuqc_interest_category:a+"bcuqc_interest_category.html",citizen:a+"citizen.html",sp_veteran:a+"sp_veteran.html",incomegrid:a+"incomegrid.html",assetgrid:a+"assetgrid.html"};return b}]),app.directive("question",["questionTemplates","AnswersByCategories","category","localStorageService","BenefitItems",function(questionTemplates,AnswersByCategories,category,localStorageService,BenefitItems){return{restrict:"E",template:"<span ng-show='checkRule()' ng-include='question_template_link'></span>",link:function(scope,element,ngShow){for(var i=0;i<scope.question.answer_fields.length;i++)void 0!=scope.question.answer_fields[i].default&&void 0==scope.$root.answers[category.currentCategory()][scope.question.answer_fields[i].code]&&(scope.$root.answers[category.currentCategory()][scope.question.answer_fields[i].code]=scope.question.answer_fields[i].default),AnswersByCategories.setCategory(scope.question.answer_fields[i].code,category.currentCategory(),scope.question.answer_fields[i].type);void 0==scope.question.rule?scope.checkRule=function(){return!0}:""==scope.question.rule?scope.checkRule=function(){return!0}:0!=scope.question.rulecode.indexOf("question_dep_")?scope.checkRule=function(){return!0}:scope.checkRule=function(){if(void 0==scope.question.rule)return!0;if(""==scope.question.rule)return!0;for(var ruleArray=scope.question.rule.split("#"),evalString="",i=0;i<ruleArray.length;i++){var isVar=i%2==1;if(isVar){var val="";try{var ans=ruleArray[i].trim(),cat=AnswersByCategories.getCategory(ans);switch(cat.type){case"select":val="'"+scope.$root.answers[cat.category][ans].code+"'";break;case"yn":val="'"+scope.$root.answers[cat.category][ans]+"'";break;default:val=scope.$root.answers[cat.category][ans]}}catch(a){val="undefined"}evalString+=val}else evalString+=ruleArray[i]}var retVal=!1;try{retVal=eval(evalString)}catch(a){retVal=!1}return retVal?retVal:retVal},scope.category=category.currentCategory(),void 0==questionTemplates[scope.question.code]?scope.question_template_link="/content/themes/ncoa/resources/views/directives/question/question.html?"+new Date:(void 0!=localStorageService.get("interested_category")&&"bcuqc_interest_category"==scope.question.code&&("and_more"==localStorageService.get("interested_category")?(scope.addProgram(BenefitItems.getByCode("bcuqc_category_transportation")),scope.addProgram(BenefitItems.getByCode("bcuqc_category_education")),scope.addProgram(BenefitItems.getByCode("bcuqc_category_discounts")),scope.addProgram(BenefitItems.getByCode("bcuqc_category_other_assistance"))):scope.addProgram(BenefitItems.getByCode(localStorageService.get("interested_category"))),localStorageService.remove("interested_category")),scope.question_template_link=questionTemplates[scope.question.code]+"?"+new Date)},scope:{question:"="},controller:"questionController"}}]),app.directive("setDefaultAnswer",[function(){return{link:function(a,b,c){void 0==a.$root.answers[a.category]&&(a.$root.answers[a.category]={}),a.$root.answers[a.category][a.code]=a.value},scope:{category:"@",code:"@",value:"@"}}}]),app.directive("answerfield",["$state",function(a){return{template:"<span ng-include='answer_field_link'></span>",link:function(b,c,d,e,f){b.answer_field_link="/content/themes/ncoa/resources/views/directives/answer-field/"+b.answer_field.type+".html?"+new Date,b.category=a.params.category},scope:{answer_field:"=answerField",question:"=question"}}}]),app.directive("ngLabel",["$compile",function(a){return{restrict:"E",link:function(a,b,c){b.html(a.text)},scope:{text:"@"}}}]),app.directive("script",["localStorageService",function(a){return{restrict:"E",scope:!1,link:function(a,b,c){if("text/javascript-lazy"===c.type){var d=b.text(),e=new Function(d);e()}}}}]),app.directive("textSizeChanger",["$document","localStorageService",function(a,b){return{restrict:"E",templateUrl:"/content/themes/ncoa/resources/views/directives/text-size-changer/text-size-changer.html?"+new Date,scope:{min:"@",mid:"@",max:"@",unit:"@"},link:function(c,d,e){function f(e){switch(a[0].body.style.fontSize=e+c.unit,$(d).addClass(e),e){case"18":c.sel="min";break;case"20":c.sel="mid";break;default:c.sel="max"}b.set("TextSize",e)}var g=b.get("TextSize");c.sel="min",g&&f(g),c.changeSize=f}}}]),app.directive("yearDrop",["category",function(a){function b(a,b){for(var c=(new Date).getFullYear(),d=[],e=0;e<b;e++)d.push(c-e);return d}return{restrict:"E",template:'<select class="form-control inline" name="dob-year" ng-model="$root.answers[category][code]" ng-options="y for y in years"></select>',link:function(c,d,e){c.years=b(+e.offset,+e.range),c.category=a.currentCategory(),void 0==c.$root.answers[a.currentCategory()][c.code]&&(c.$root.answers[a.currentCategory()][c.code]=c.years[66])},scope:{code:"@"}}}]),app.directive("stateSelection",function(){return{restrict:"A",link:function(a,b,c){a.stateChange=function(){"TX"==a.mapState?$("#map_base svg path#map_43").css({fill:"#1F3D7D"}):$("#map_base svg path#map_43").css({fill:"#1888de"}),"AL"==a.mapState?$("#map_base svg path#map_1").css({fill:"#1F3D7D"}):$("#map_base svg path#map_1").css({fill:"#1888de"})}}}}),app.directive("zipcode",["locationFinder","category","$filter","localStorageService",function(a,b,c,d){return{link:function(e,f){function g(a){if(5!=e.$root.answers[b.currentCategory()].zip.length)return e.$root.isZipValid=!1,e.zipValid="",e.$parent.zipCodeCheckResult="Error!",e.$parent.zipCodeDescription="Please enter a valid zip code in the United States.",void(e.$parent.zipCodeUpdated=!0);if("OK"==a.status){for(var d=!0,f=0;f<a.results[0].address_components.length;f++)for(var g=0;g<a.results[0].address_components[f].types.length;g++)"country"!=a.results[0].address_components[f].types[g]&&"political"!=a.results[0].address_components[f].types[g]||"US"!=a.results[0].address_components[f].short_name||(d=!1),"postal_code"==a.results[0].address_components[f].types[g]&&(e.$root.answers[b.currentCategory()].zipcode=a.results[0].address_components[f].long_name),"administrative_area_level_1"==a.results[0].address_components[f].types[g]&&(e.$root.answers[b.currentCategory()].stateId=a.results[0].address_components[f].short_name,e.zipCodeLabel="Update Zip Code"),"administrative_area_level_2"==a.results[0].address_components[f].types[g]&&(e.$root.answers[b.currentCategory()].county=a.results[0].address_components[f].short_name.toUpperCase().replace(" COUNTY",""));d?(e.$root.isZipValid=!1,e.zipValid="",e.$parent.zipCodeCheckResult="Error!",e.$parent.zipCodeDescription="Please enter a valid zip code in the United States."):(e.$root.answers[b.currentCategory()].zipcode_formatted=c("limitTo")(a.results[0].formatted_address,a.results[0].formatted_address.lastIndexOf(","),0),e.$root.isZipValid=!0,e.zipValid="1",e.$parent.zipCodeCheckResult="Success!",e.$parent.zipCodeDescription=e.$root.answers[b.currentCategory()].zipcode_formatted)}else e.$root.isZipValid=!1,e.zipValid="",e.$parent.zipCodeCheckResult="Error!",e.$parent.zipCodeDescription="Please enter a valid zip code in the United States.";e.$parent.zipCodeUpdated=!0;
}e.category=b.currentCategory(),e.regPattern="\\d{5}",e.$root.isZipValid=!1,e.zipValid="",e.$root.isZipCodeValidating=!1,e.updateZip=function(){e.$root.isZipCodeValidating=!0,a.getLocation(e.$root.answers[e.category].zip).success(function(a,b,c,d){g(a),e.$root.isZipCodeValidating=!1})},void 0!=d.get("v_zipcode")?(e.zipCodeLabel="Update Zip Code",e.$root.answers[b.currentCategory()].zip=d.get("v_zipcode"),d.remove("v_zipcode"),e.updateZip()):e.zipCodeLabel="Find Zip Code",e.resetZip=function(){e.$root.isZipEdit=!0,$("#zipcode").focus()},void 0!=e.$root.answers&&void 0!=e.$root.answers[b.currentCategory()]&&void 0!=e.$root.answers[b.currentCategory()].zipcode&&e.updateZip()}}}]),app.factory("BenefitItems",[function(){var a={},b=[{name:"Medication",code:"bcuqc_category_rx",image:"/content/themes/ncoa/resources/assets/images/categories/category_medicine.svg",alt:"Medicine Pills",title:"Medicine Pills",sort:1},{name:"Health Care",code:"bcuqc_category_medicaid",image:"/content/themes/ncoa/resources/assets/images/categories/category_health.svg",alt:"Doctor Symbols",title:"Doctor Symbol",sort:2},{name:"Income Assistance",code:"bcuqc_category_income",image:"/content/themes/ncoa/resources/assets/images/categories/category_income.svg",alt:"Money",title:"Money",sort:3},{name:"Food & Nutrition",code:"bcuqc_category_nutrition",image:"/content/themes/ncoa/resources/assets/images/categories/category_food.svg",alt:"Basket of Food",title:"Basket of Food",sort:4},{name:"Housing & Utilities",code:"bcuqc_category_utility",image:"/content/themes/ncoa/resources/assets/images/categories/category_housing.svg",alt:"House",title:"House",sort:5},{name:"Tax Relief",code:"bcuqc_category_property_taxrelief",image:"/content/themes/ncoa/resources/assets/images/categories/category_taxRelief.svg",alt:"Piggy Bank",title:"Piggy Bank",sort:6},{name:"Veterans",code:"bcuqc_category_veteran",image:"/content/themes/ncoa/resources/assets/images/categories/category_veteran.svg",alt:"Medal",title:"Medal",sort:7},{name:"Employment",code:"bcuqc_category_employment",image:"/content/themes/ncoa/resources/assets/images/categories/category_employment.svg",alt:"Briefcase",title:"Briefcase",sort:8},{name:"Transportation",code:"bcuqc_category_transportation",image:"/content/themes/ncoa/resources/assets/images/categories/category_transportation.svg",alt:"Automobile",title:"Automobile",sort:9},{name:"Education",code:"bcuqc_category_education",image:"/content/themes/ncoa/resources/assets/images/categories/category_education.svg",alt:"Apple on Book",title:"Apple on Book",sort:10},{name:"Discount",code:"bcuqc_category_discounts",image:"/content/themes/ncoa/resources/assets/images/categories/category_discounts.svg",alt:"Percent Off",title:"Percent Off",sort:11},{name:"Other Assistance",code:"bcuqc_category_other_assistance",image:"/content/themes/ncoa/resources/assets/images/categories/category_assistance.svg",alt:"Information",title:"Information",sort:12}];return a.returnAllCodes=function(){var a=[];return b.forEach(function(b){a.push(b.code)}),a},a.getBenefitItems=function(){return b},a.getByCode=function(a){for(var c=0;c<b.length;c++)if(b[c].code==a)return b[c]},a.programsInStructure=function(b){var c=0;for(var d in b)void 0!=a.getByCode(d)&&c++;return c},a}]),app.factory("ScreeningRoutes",[function(){var a={};return a.basics={prev:"questionnaire.initial-results",next:"health",pgno:1},a.health={prev:"basics",next:"household",pgno:2},a.household={prev:"health",next:"finances",pgno:3},a.finances={prev:"household",next:"questionnaire.loader",pgno:4},a}]),app.factory("Drugs",[function(){var a={},b=[];return a.setDrugs=function(a){b=a},a.getDrugs=function(){return b},a.nameByCode=function(a){for(var c=0;c<b.length;c++)if(b[c].code==a)return b[c].display},a.codeByName=function(a){for(var c=0;c<b.length;c++)if(b[c].display==a)return b[c].code},a}]),app.service("locationFinder",["$http",function(a){var b="//maps.googleapis.com/maps/api/geocode/json";this.getLocation=function(c){return a.get(b+"?address="+c+"&sensor=true")}}]),app.service("savePrescreen",["$http",function(a){this.post=function(b){return a.post(window.webServiceUrl+"/rest/backend/screening/savePrescreen",b,{headers:{"Content-Type":"text/plain; charset=UTF-8"}})}}]),app.service("saveScreening",["$http",function(a){this.post=function(b){return a.post(window.webServiceUrl+"/rest/backend/screening/saveScreening",b,{headers:{"Content-Type":"text/plain; charset=UTF-8"}})}}]),app.service("prescreenQuestions",["$http",function(a){this.get=function(){return a.get(window.webServiceUrl+"/rest/backend/questionnaire/prescreen")}}]),app.service("screeningQuestions",["$http",function(a){this.get=function(b,c,d){return a.get(window.webServiceUrl+"/rest/backend/questionnaire/"+b+"/"+c+"/"+d)}}]),app.factory("prescreen",["localStorageService","$window",function(a,b){var c={},d=a.get("prescreen");return c.clear=function(){a.remove("prescreen")},void 0==d?c.data={}:d.name==b.name?c.data=d:(a.remove("prescreen"),c.data={}),void 0==c.data.answers&&(c.data.answers={}),c.save=function(){c.data.name=b.name,a.set("prescreen",c.data)},c}]),app.factory("screening",["localStorageService","$window","ScreeningRoutes",function(a,b,c){var d={},e=a.get("screening");if(void 0!=e&&e.name!=b.name&&a.remove("screening"),void 0==e?(e={},e.questions={},e.answers={},e.results={},e.results.screening={}):void 0==e.answers&&(e.answers={}),Object.keys(e.answers).length!=Object.keys(c).length){e.answers={};for(i in c)e.answers[i]={}}return d.data=e,d.save=function(){a.set("screening",d.data)},d.clear=function(){a.remove("screening")},d}]),app.factory("questionnaire",["Income","Asset",function(a,b){var c={};return c.incomes=a.getIncomes(),c.assets=b.getAssets(),c}]),app.controller("questionController",["$scope","category","BenefitItems","AnswersByCategories","Months",function(a,b,c,d,e){a.category=b.currentCategory(),a.months=e,a.programs=c.getBenefitItems(),a.selectLinkText="Select All",a.showSpouseVeteranStatus=function(){return void 0!=a.$root.answers[b.currentCategory()].marital_stat&&(("married"==a.$root.answers[b.currentCategory()].marital_stat.code||"married_living_sep"==a.$root.answers[b.currentCategory()].marital_stat.code||"widowed"==a.$root.answers[b.currentCategory()].marital_stat.code)&&"n"==a.$root.answers[b.currentCategory()].veteran)},a.showBenefits=function(){return void 0!=a.$root.answers[b.currentCategory()].veteran&&void 0!=a.$root.answers[b.currentCategory()].marital_stat},a.addProgram=function(d){var e=a.$root.answers[b.currentCategory()][d.code];void 0==e?a.$root.answers[b.currentCategory()][d.code]="y":delete a.$root.$root.answers[b.currentCategory()][d.code],a.$root.areProgramsAdded=0==c.programsInStructure(a.$root.answers[b.currentCategory()])?void 0:"1",c.programsInStructure(a.$root.answers[b.currentCategory()])==a.programs.length?a.selectLinkText="Deselect All":a.selectLinkText="Select All"},a.programAdded=function(c){return void 0!=a.$root.$root.answers[b.currentCategory()][c]},a.selectAll=function(){if(c.programsInStructure(a.$root.answers[b.currentCategory()])==a.programs.length){for(var d=0;d<a.programs.length;d++)delete a.$root.$root.answers[b.currentCategory()][a.programs[d].code];$(".benefits-selector-repeater").removeClass("checked"),a.selectLinkText="Select All"}else{for(var d=0;d<a.programs.length;d++)a.$root.answers[b.currentCategory()][a.programs[d].code]="y";$(".benefits-selector-repeater").addClass("checked"),a.selectLinkText="Deselect All"}a.$root.areProgramsAdded=0==c.programsInStructure(a.$root.answers[b.currentCategory()])?void 0:"1"}}]),app.controller("preScreenController",["$scope","localStorageService","prescreen","locationFinder","savePrescreen","$timeout","$state","BenefitItems","prescreenQuestions","screening",function(a,b,c,d,e,f,g,h,i,j){a.category="prescreen",a.showLoader=!1,void 0==a.$root.answers&&(a.$root.answers={}),a.$root.answers.prescreen=c.data.answers,a.sibmitDisabled=!0,void 0==a.$root.prescreen&&(a.$root.prescreen={},a.$root.prescreen.programList={}),a.canContinue=!0,a.showquestions=!1,a.$root.prescreen.showCTA=!0,a.$root.areProgramsAdded=0==h.programsInStructure(a.$root.answers.prescreen)?void 0:"1",i.get().success(function(b,d,e,f){c.data.questions=b,a.questionSet=c.data.questions}),a.submitPrescreen=function(){a.showLoader=!0,document.querySelector(".container").scrollIntoView(),a.sibmitDisabled=!0,c.data.screenData={},c.data.screenData.formatted_address=a.$root.answers[a.category].zipcode_formatted,c.data.screenData.searchingFor=a.$root.answers[a.category].client.display,c.data.screenData.date_of_birth={month:a.$root.answers[a.category].dob_month.name,year:a.$root.answers[a.category].dob_year},c.data.screenData.marital_status=a.$root.answers[a.category].marital_stat.display,c.data.screenData.veteran="y"==a.$root.answers[a.category].veteran?"Yes":"No",c.data.screenData.benefits_categories=[],c.data.screenData.benefits_categories_codes=[];for(var b in a.$root.answers[a.category])void 0!=h.getByCode(b)&&(c.data.screenData.benefits_categories.push(h.getByCode(b)),c.data.screenData.benefits_categories_codes.push(b));console.log(c.data.screenData);var d=a.$root.answers[a.category];d.state_id=a.$root.answers[a.category].stateId,d.st=a.$root.answers[a.category].stateId,e.post(d).success(function(b,d,e,f){a.sibmitDisabled=!1,c.data.answers=a.$root.answers[a.category],c.data.results=b,c.save(),j.data.results.screening.id=void 0,a.showLoader=!1,g.go("questionnaire.initial-results")})},a.$watch("$root.answers."+a.category+".client",function(){void 0==a.$root.answers[a.category].client||$(".dob").is(":visible")||setTimeout(function(){var a=document.querySelector(".dob");void 0!=a&&$("html,body").animate({scrollTop:$(a).offset().top-100+"px"},500)},500)}),a.$watch("$root.answers."+a.category+".dob_year",function(){void 0==a.$root.answers[a.category].dob_month||$(".income").is(":visible")||setTimeout(function(){var a=document.querySelector(".income");void 0!=a&&$("html,body").animate({scrollTop:$(a).offset().top-100+"px"},500)},500)}),a.$watch("$root.answers."+a.category+".dob_month",function(){void 0==a.$root.answers[a.category].dob_year||$(".income").is(":visible")||setTimeout(function(){var a=document.querySelector(".income");void 0!=a&&$("html,body").animate({scrollTop:$(a).offset().top-100+"px"},500)},500)}),a.$watch("$root.answers."+a.category+".bcuqc_income",function(){void 0==a.$root.answers[a.category].bcuqc_income||$(".marital-status").is(":visible")||setTimeout(function(){var a=document.querySelector(".marital-status");void 0!=a&&$("html,body").animate({scrollTop:$(a).offset().top-100+"px"},500)},500)}),a.$watch("$root.answers."+a.category+".marital_stat",function(){void 0==a.$root.answers[a.category].marital_stat||$(".veteran-status").is(":visible")||setTimeout(function(){var a=document.querySelector(".veteran-status");void 0!=a&&$("html,body").animate({scrollTop:$(a).offset().top-100+"px"},500)},500)}),a.$watch("$root.answers."+a.category+".veteran",function(){var b=a.$root.answers[a.category].marital_stat,c=a.$root.answers[a.category].veteran;void 0!=b&&("married"!=b.code&&"married_living_sep"!=b.code&&"widowed"!=b.code||"n"!=c||$(".partner-veteran-status").is(":visible")?"married"!=b.code&&"married_living_sep"!=b.code&&"widowed"!=b.code||"y"!=c||$(".benefits").is(":visible")?"married"!=b.code&&"married_living_sep"!=b.code&&"widowed"!=b.code||"n"!=c||$(".benefits").is(":visible")?"divorced"!=b.code&&"single"!=b.code||"y"!=c||$(".benefits").is(":visible")?"divorced"!=b.code&&"single"!=b.code||"n"!=c||$(".benefits").is(":visible")||(a.sibmitDisabled=!1,setTimeout(function(){var a=document.querySelector(".benefits");void 0!=a&&$("html,body").animate({scrollTop:$(a).offset().top-100+"px"},500)},500)):(a.sibmitDisabled=!1,setTimeout(function(){var a=document.querySelector(".veteran-status .cta");void 0!=a&&$("html,body").animate({scrollTop:$(a).offset().top-10+"px"},500)},500)):(a.sibmitDisabled=!1,setTimeout(function(){var a=document.querySelector(".benefits");void 0!=a&&$("html,body").animate({scrollTop:$(a).offset().top-100+"px"},500)},500)):(a.sibmitDisabled=!1,setTimeout(function(){var a=document.querySelector(".veteran-status .cta");void 0!=a&&$("html,body").animate({scrollTop:$(a).offset().top-10+"px"},500)},500)):setTimeout(function(){var a=document.querySelector(".partner-veteran-status");void 0!=a&&$("html,body").animate({scrollTop:$(a).offset().top-100+"px"},500)},500))}),a.disableSubmit=function(){return void 0==this.prescreenForm||!this.prescreenForm.$valid}}]),app.controller("preScreenInitalController",["$scope","$state","prescreenQuestions","prescreen",function(a,b,c,d){void 0==a.$root.answers&&(a.$root.answers={}),a.$root.answers.prescreen=d.data.answers,c.get().success(function(a,c,e,f){d.data.questions=a,"prescreen"==b.current.name&&b.transitionTo("prescreen.questions",{category:"prescreen"})})}]),app.controller("preScreenResultsController",["$scope","prescreen","$location","$state",function(a,b,c,d){document.querySelector(".page-wrapper").scrollIntoView(),a.tooltipAccuracy="You will receive more accurate results if you provide more details.",a.tooltipExpenses="Expenses are the amount of money you spend on things like rent, utilities, and other costs of living.",a.goScreening=function(){d.transitionTo("screening",{category:"basics",state:b.data.answers.stateId})};var e=document.querySelector(".odometer");od=new Odometer({el:e,value:0}),a.foundCount=0;for(var f=0;f<b.data.results.found_programs.length;f++)a.foundCount=a.foundCount+b.data.results.found_programs[f].count;od.update(a.foundCount)}]),app.controller("questionnaireBasicController",["$scope","$state","questionnaire",function(a,b,c){a.tooltip={race:"Why are we asking? This question is optional, and does not affect your results. Your answer will help us understand how best to reach people who can benefit from this service."},a.genders=[{id:"male",name:"Male"},{id:"female",name:"Female"}],a.citizens=[{id:"citizen",name:"Citizen"},{id:"legal_resident",name:"Legal Resident"},{id:"qualified_alien",name:"Other Qualified Alien"},{id:"other_citizen",name:"Other"}],a.receives=[{id:"medicare_receive",name:"Medicare (currently enrolled or expect to be within the next 3 months)"},{id:"receive_partd",name:"Medicare Prescription Drug Plan (Part D)"},{id:"receive_lis",name:"Extra Help/LIS through Medicare Prescription Drug Coverage"},{id:"med_receive",name:"Medicaid"},{id:"receive_msp",name:"Medicare Savings Programs (QMB, SLMB, or QI)"},{id:"snap_receive",name:"Supplemental Nutrition Assistance Program (SNAP)"},{id:"ssi_receive",name:"Supplemental Security Income (SSI)"},{id:"rec_tricare",name:"TRICARE"},{id:"receive_va",name:"Veteran's Health Care Benefits"},{id:"liheap_receive",name:"Low Income Home Energy Assistance Program (LIHEAP)"},{id:"receive_pub_housing",name:"Public Housing"},{id:"receive_section_8",name:"Housing Choice Vouchers (Section 8)"},{id:"scsep_receive",name:"Senior Community Service Employment Program (SCSEP)"}],a.races=[{id:"white",name:"White"},{id:"african_american",name:"Black or African-American"},{id:"american_indian_native_alaskans",name:"American Indian or Alaska Native"},{id:"asian",name:"Asian or Asian-American"},{id:"pacific_islander",name:"Native Hawaiian or Other Pacific Islander"},{id:"hispanic",name:"Hispanic, Latino, or Spanish Origin"},{id:"other_race",name:"Other"}]}]),app.controller("questionnaireController",["$scope","$state","questionnaire",function(a,b,c){a.questionnaire=c,void 0==a.questionnaire.request&&(a.questionnaire.request={}),"questionnaire"==b.current.name&&b.transitionTo("questionnaire.basics")}]),app.controller("screeningController",["$rootScope","$scope","$state","prescreen","screening","screeningQuestions",function(a,b,c,d,e,f){a.showLoader=!1,void 0==b.$root.answers&&(b.$root.answers=e.data.answers),void 0==b.$root.questions&&(b.$root.questions=e.data.questions),void 0!=c.params.category&&void 0!=c.params.state?(b.category=c.params.category,void 0==b.$root.answers[c.params.category]&&(b.$root.answers[c.params.category]=e.data.answers[c.params.category]),f.get(c.params.category,d.data.results.screening.id,c.params.state).success(function(a){e.data.questions[c.params.category]=a,b.$root.questions[c.params.category]=a})):c.transitionTo("screening",{category:"basics",state:d.data.answers.stateId})}]),app.controller("questionnaireFinancesController",["$scope","Income",function(a,b){a.income_total=function(c){var d=0,e=0;for(var f in a.questionnaire.request["finances-income-grid"])0==f.indexOf(c)&&f.indexOf("total_complete")==-1&&f.indexOf("total_unearned")==-1&&(d+=a.questionnaire.request["finances-income-grid"][f],b.isUnearned(f.replace(c,""))&&(e+=a.questionnaire.request["finances-income-grid"][f]));return void 0==a.questionnaire.request["income-totals"]&&(a.questionnaire.request["income-totals"]={}),a.questionnaire.request["income-totals"][c+"total_complete"]=d,a.questionnaire.request["income-totals"][c+"total_unearned"]=e,d},a.assets_total=function(b){var c=0;for(var d in a.questionnaire.request["finances-assets-grid"])0==d.indexOf(b)&&d.indexOf("total_complete")==-1&&(c+=a.questionnaire.request["finances-assets-grid"][d]);return void 0==a.questionnaire.request["assets-totals"]&&(a.questionnaire.request["assets-totals"]={}),a.questionnaire.request["assets-totals"][b+"total_complete"]=c,c},a.setIncomeSelected=function(b){void 0==a.questionnaire.incomes[b].selected?a.questionnaire.incomes[b].selected=!0:1==a.questionnaire.incomes[b].selected?a.questionnaire.incomes[b].selected=!1:a.questionnaire.incomes[b].selected=!0},a.setAssetsSelected=function(b){void 0==a.questionnaire.assets[b].selected?a.questionnaire.assets[b].selected=!0:1==a.questionnaire.assets[b].selected?a.questionnaire.assets[b].selected=!1:a.questionnaire.assets[b].selected=!0}}]),app.controller("questionnaireHealthController",["$scope","questionnaire","CronicConditions",function(a,b,c){a.chronicConditions=c.getCronicConditions()}]),app.controller("questionnaireHouseholdController",["$scope","questionnaire",function(a,b){a.housings=[{id:"own_home",name:"Own Home"},{id:"rent_dwelling",name:"Rental"},{id:"own_mobile_home",name:"Own Mobile Home"},{id:"boarding_home",name:"Boarding Home"},{id:"live_with_others",name:"Live with Others"},{id:"nursing_facility",name:"Nursing Facility"},{id:"assisted_living",name:"Assisted Living"},{id:"subsidized_housing",name:"Low-Income Housing"},{id:"homeless_shelter",name:"Homeless or Live in a Shelter"}]}]),app.controller("questionnaireLoaderController",["$scope","$state",function(a,b){$(".btns-container").hide(),$(".card-nested").addClass("loader"),a.$on("$stateChangeStart",function(a,b,c,d,e,f){$(".btns-container").show(),$(".card-nested").removeClass("loader")})}]),app.controller("questionnairePrescreenResultsController",["$scope","$state","BenefitItems","prescreen",function(a,b,c,d){var e=document.querySelector(".odometer");od=new Odometer({el:e,value:0});var f=[];a.found_programs=[],a.available_fact_sheets={},d.data.results.found_programs.forEach(function(b){d.data.answers[b.category]&&(f.push(b.category),a.found_programs.push(b)),a.available_fact_sheets[b.category]=[],b.programs.forEach(function(c){a.available_fact_sheets[b.category].push(c.code)})}),console.log(encodeURIComponent(JSON.stringify(a.available_fact_sheets)));var g=$(d.data.screenData.benefits_categories_codes).not(f).get();g.forEach(function(b){a.found_programs.push({category:b,count:0,programs:[]})}),a.foundCount=0;for(var h=0;h<d.data.results.found_programs.length;h++)a.foundCount=a.foundCount+d.data.results.found_programs[h].count;od.update(a.foundCount),document.querySelector(".page-wrapper h1").scrollIntoView()}]),app.directive("divProgramsCategory",["BenefitItems","prescreen","$sce",function(a,b,c){return{restrict:"E",templateUrl:"/content/themes/ncoa/resources/views/directives/program/programs.category.html?"+new Date,link:function(c,d){c.benefitItem=a.getByCode(c.found_program.category),c.stateId=b.data.answers.stateId,c.defaultLangs=window.defaultLangs,c.zipcode=b.data.answers.zip},scope:{found_program:"=foundProgram",short:"@"}}}]),app.directive("divKeyProgram",["prescreen",function(a){return{restrict:"E",templateUrl:"/content/themes/ncoa/resources/views/directives/program/programs.key-program.html?"+new Date,scope:{program:"=program"},link:function(b,c){b.stateId=a.data.answers.stateId,b.zipcode=a.data.answers.zip,b.subString=function(a){return a.length>70?a.substring(0,70)+"...":a}}}}]),app.directive("divProgramDesc",function(){return{restrict:"E",link:function(a,b){b.append("<p>"+a.program_desc+"</p>")},scope:{program_desc:"=programDesc"}}}),app.controller("questionnaireResultsController",["$scope","$state","screening",function(a,b,c){var d=document.querySelector(".odometer");od=new Odometer({el:d,value:0});a.foundCount=0;for(var e=0;e<c.data.results.found_programs.length;e++)a.foundCount=a.foundCount+c.data.results.found_programs[e].count;od.update(a.foundCount),a.key_programs=c.data.results.key_programs,a.found_programs=c.data.results.found_programs,document.querySelector(".page-wrapper h1").scrollIntoView()}]),app.controller("zipCodeController",["$scope","$http","$window","localStorageService","locationFinder","$state",function(a,b,c,d,e,f){a.findZip=function(b){return 5!=b.length?void(a.isZipInvalid=!0):(a.isZipInvalid=!1,void e.getLocation(b).success(function(b,e,f,g){var h="";if("OK"==b.status){a.isZipInvalid=!0;for(var i=0;i<b.results[0].address_components.length;i++)for(var j=0;j<b.results[0].address_components[i].types.length;j++)"country"!=b.results[0].address_components[i].types[j]&&"political"!=b.results[0].address_components[i].types[j]||"US"!=b.results[0].address_components[i].short_name||(a.isZipInvalid=!1),"postal_code"==b.results[0].address_components[i].types[j]&&(h=b.results[0].address_components[i].long_name);a.isZipInvalid||(d.set("v_zipcode",b.results[0].address_components[0].long_name),c.location.href="/find-my-benefits")}else a.isZipInvalid=!0}))}}]),app.controller("dobController",["$scope","category","AnswersByCategories",function(a,b,c){a.calcDob=function(){void 0!=a.$root.answers[b.currentCategory()].dob_month&&void 0!=a.$root.answers[b.currentCategory()].dob_year&&(c.setCategory("dob",b.currentCategory(),"integer"),a.$root.answers[b.currentCategory()].dob=(new Date).getFullYear()-a.$root.answers[b.currentCategory()].dob_year,(new Date).getMonth()+1>=a.$root.answers[a.category].dob_month&&(a.$root.answers[b.currentCategory()].dob=a.$root.answers[b.currentCategory()].dob+1))};var d="$root.answers."+b.currentCategory()+".dob_year";a.$watch(d,function(){a.calcDob()});var e="$root.answers."+b.currentCategory()+".dob_month";a.$watch(e,function(){a.calcDob()})}]),app.filter("unsafe",function(a){return a.trustAsHtml}),function(a,b,c,d){a.fn.quicksearch=function(c,d){var e,f,g,h,i="",j=this,k=a.extend({delay:100,selector:null,stripeRows:null,loader:null,noResults:"",matchedResultsCount:0,bind:"keyup",onBefore:function(){},onAfter:function(){},show:function(){this.style.display=""},hide:function(){this.style.display="none"},prepareQuery:function(a){return a.toLowerCase().split(" ")},testQuery:function(a,b,c){for(var d=0;d<a.length;d+=1)if(b.indexOf(a[d])===-1)return!1;return!0}},d);return this.go=function(){for(var a=0,b=0,c=!0,d=k.prepareQuery(i),e=0===i.replace(" ","").length,a=0,h=g.length;a<h;a++)e||k.testQuery(d,f[a],g[a])?(k.show.apply(g[a]),c=!1,b++):k.hide.apply(g[a]);return c?this.results(!1):(this.results(!0),this.stripe()),this.matchedResultsCount=b,this.loader(!1),k.onAfter(),this},this.search=function(a){i=a,j.trigger()},this.currentMatchedResults=function(){return this.matchedResultsCount},this.stripe=function(){if("object"==typeof k.stripeRows&&null!==k.stripeRows){var b=k.stripeRows.join(" "),c=k.stripeRows.length;h.not(":hidden").each(function(d){a(this).removeClass(b).addClass(k.stripeRows[d%c])})}return this},this.strip_html=function(b){var c=b.replace(new RegExp("<[^<]+>","g"),"");return c=a.trim(c.toLowerCase())},this.results=function(b){return"string"==typeof k.noResults&&""!==k.noResults&&(b?a(k.noResults).hide():a(k.noResults).show()),this},this.loader=function(b){return"string"==typeof k.loader&&""!==k.loader&&(b?a(k.loader).show():a(k.loader).hide()),this},this.cache=function(){h=a(c),"string"==typeof k.noResults&&""!==k.noResults&&(h=h.not(k.noResults));var b="string"==typeof k.selector?h.find(k.selector):a(c).not(k.noResults);return f=b.map(function(){return j.strip_html(this.innerHTML)}),g=h.map(function(){return this}),i=i||this.val()||"",this.go()},this.trigger=function(){return this.loader(!0),k.onBefore(),b.clearTimeout(e),e=b.setTimeout(function(){j.go()},k.delay),this},this.cache(),this.results(!0),this.stripe(),this.loader(!1),this.each(function(){a(this).on(k.bind,function(){i=a(this).val(),j.trigger()})})}}(jQuery,this,document),!function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$container=a("<div/>",{class:"ms-container"}),this.$selectableContainer=a("<div/>",{class:"ms-selectable"}),this.$selectionContainer=a("<div/>",{class:"ms-selection"}),this.$selectableUl=a("<ul/>",{class:"ms-list",tabindex:"-1"}),this.$selectionUl=a("<ul/>",{class:"ms-list",tabindex:"-1"}),this.scrollTo=0,this.elemsSelector="li:visible:not(.ms-optgroup-label,.ms-optgroup-container,."+c.disabledClass+")"};b.prototype={constructor:b,init:function(){var b=this,c=this.$element;if(0===c.next(".ms-container").length){c.css({position:"absolute",left:"-9999px"}),c.attr("id",c.attr("id")?c.attr("id"):Math.ceil(1e3*Math.random())+"multiselect"),this.$container.attr("id","ms-"+c.attr("id")),this.$container.addClass(b.options.cssClass),c.find("option").each(function(){b.generateLisFromOption(this)}),this.$selectionUl.find(".ms-optgroup-label").hide(),b.options.selectableHeader&&b.$selectableContainer.append(b.options.selectableHeader),b.$selectableContainer.append(b.$selectableUl),b.options.selectableFooter&&b.$selectableContainer.append(b.options.selectableFooter),b.options.selectionHeader&&b.$selectionContainer.append(b.options.selectionHeader),b.$selectionContainer.append(b.$selectionUl),b.options.selectionFooter&&b.$selectionContainer.append(b.options.selectionFooter),b.$container.append(b.$selectableContainer),b.$container.append(b.$selectionContainer),c.after(b.$container),b.activeMouse(b.$selectableUl),b.activeKeyboard(b.$selectableUl);var d=b.options.dblClick?"dblclick":"click";b.$selectableUl.on(d,".ms-elem-selectable",function(){a(this).toggleClass("selected"),0==a(".ms-selectable .selected").length?a(".ms-selectable .add").attr("disabled",!0):a(".ms-selectable .add").removeAttr("disabled")}),b.$selectionUl.on(d,".ms-elem-selection",function(){a(this).toggleClass("selected"),0==a(".ms-selection .selected").length?a(".ms-selection .remove").attr("disabled",!0):a(".ms-selection .remove").removeAttr("disabled")}),b.activeMouse(b.$selectionUl),b.activeKeyboard(b.$selectionUl),c.on("focus",function(){b.$selectableUl.focus()})}var e=c.find("option:selected").map(function(){return a(this).val()}).get();b.select(e,"init"),"function"==typeof b.options.afterInit&&b.options.afterInit.call(this,this.$container)},generateLisFromOption:function(b,c,d){for(var e=this,f=e.$element,g="",h=a(b),i=0;i<b.attributes.length;i++){var j=b.attributes[i];"value"!==j.name&&"disabled"!==j.name&&(g+=j.name+'="'+j.value+'" ')}var k=a("<li "+g+"><span>"+e.escapeHTML(h.text())+"</span></li>"),l=k.clone(),m=h.val(),n=e.sanitize(m);k.data("ms-value",m).addClass("ms-elem-selectable").attr("id",n+"-selectable"),l.data("ms-value",m).addClass("ms-elem-selection").attr("id",n+"-selection").hide(),(h.prop("disabled")||f.prop("disabled"))&&(l.addClass(e.options.disabledClass),k.addClass(e.options.disabledClass));var o=h.parent("optgroup");if(o.length>0){var p=o.attr("label"),q=e.sanitize(p),r=e.$selectableUl.find("#optgroup-selectable-"+q),s=e.$selectionUl.find("#optgroup-selection-"+q);if(0===r.length){var t='<li class="ms-optgroup-container"></li>',u='<ul class="ms-optgroup"><li class="ms-optgroup-label"><span>'+p+"</span></li></ul>";r=a(t),s=a(t),r.attr("id","optgroup-selectable-"+q),s.attr("id","optgroup-selection-"+q),r.append(a(u)),s.append(a(u)),e.options.selectableOptgroup&&(r.find(".ms-optgroup-label").on("click",function(){var b=o.children(":not(:selected, :disabled)").map(function(){return a(this).val()}).get();e.select(b)}),s.find(".ms-optgroup-label").on("click",function(){var b=o.children(":selected:not(:disabled)").map(function(){return a(this).val()}).get();e.deselect(b)})),e.$selectableUl.append(r),e.$selectionUl.append(s)}c=void 0===c?r.find("ul").children().length:c+1,k.insertAt(c,r.children()),l.insertAt(c,s.children())}else c=void 0===c?e.$selectableUl.children().length:c,k.insertAt(c,e.$selectableUl),l.insertAt(c,e.$selectionUl)},addOption:function(b){var c=this;void 0!==b.value&&null!==b.value&&(b=[b]),a.each(b,function(b,d){if(void 0!==d.value&&null!==d.value&&0===c.$element.find("option[value='"+d.value+"']").length){var e=a('<option value="'+d.value+'">'+d.text+"</option>"),b=parseInt("undefined"==typeof d.index?c.$element.children().length:d.index),f=void 0===d.nested?c.$element:a("optgroup[label='"+d.nested+"']");e.insertAt(b,f),c.generateLisFromOption(e.get(0),b,d.nested)}})},escapeHTML:function(b){return a("<div>").text(b).html()},activeKeyboard:function(b){var c=this;b.on("focus",function(){a(this).addClass("ms-focus")}).on("blur",function(){a(this).removeClass("ms-focus")}).on("keydown",function(d){switch(d.which){case 40:case 38:return d.preventDefault(),d.stopPropagation(),void c.moveHighlight(a(this),38===d.which?-1:1);case 37:case 39:return d.preventDefault(),d.stopPropagation(),void c.switchList(b);case 9:if(c.$element.is("[tabindex]")){d.preventDefault();var e=parseInt(c.$element.attr("tabindex"),10);return e=d.shiftKey?e-1:e+1,void a('[tabindex="'+e+'"]').focus()}d.shiftKey&&c.$element.trigger("focus")}if(a.inArray(d.which,c.options.keySelect)>-1)return d.preventDefault(),d.stopPropagation(),void c.selectHighlighted(b)})},moveHighlight:function(a,b){var c=a.find(this.elemsSelector),d=c.filter(".ms-hover"),e=null,f=c.first().outerHeight(),g=a.height();"#"+this.$container.prop("id");if(c.removeClass("ms-hover"),1===b){if(e=d.nextAll(this.elemsSelector).first(),0===e.length){var h=d.parent();if(h.hasClass("ms-optgroup")){var i=h.parent(),j=i.next(":visible");e=j.length>0?j.find(this.elemsSelector).first():c.first()}else e=c.first()}}else if(b===-1&&(e=d.prevAll(this.elemsSelector).first(),0===e.length)){var h=d.parent();if(h.hasClass("ms-optgroup")){var i=h.parent(),k=i.prev(":visible");e=k.length>0?k.find(this.elemsSelector).last():c.last()}else e=c.last()}if(e.length>0){e.addClass("ms-hover");var l=a.scrollTop()+e.position().top-g/2+f/2;a.scrollTop(l)}},selectHighlighted:function(a){var b=a.find(this.elemsSelector),c=b.filter(".ms-hover").first();c.length>0&&(a.parent().hasClass("ms-selectable")?this.select(c.data("ms-value")):this.deselect(c.data("ms-value")),b.removeClass("ms-hover"))},switchList:function(a){a.blur(),this.$container.find(this.elemsSelector).removeClass("ms-hover"),a.parent().hasClass("ms-selectable")?this.$selectionUl.focus():this.$selectableUl.focus()},activeMouse:function(b){var c=this;this.$container.on("mouseenter",c.elemsSelector,function(){a(this).parents(".ms-container").find(c.elemsSelector).removeClass("ms-hover"),a(this).addClass("ms-hover")}),this.$container.on("mouseleave",c.elemsSelector,function(){a(this).parents(".ms-container").find(c.elemsSelector).removeClass("ms-hover")})},refresh:function(){this.destroy(),this.$element.multiSelect(this.options)},destroy:function(){a("#ms-"+this.$element.attr("id")).remove(),this.$element.off("focus"),this.$element.css("position","").css("left",""),this.$element.removeData("multiselect")},select:function(b,c){"string"==typeof b&&(b=[b]);var d=this,e=this.$element,f=a.map(b,function(a){return d.sanitize(a)}),g=this.$selectableUl.find("#"+f.join("-selectable, #")+"-selectable").filter(":not(."+d.options.disabledClass+")"),h=this.$selectionUl.find("#"+f.join("-selection, #")+"-selection").filter(":not(."+d.options.disabledClass+")"),i=e.find("option:not(:disabled)").filter(function(){
return a.inArray(this.value,b)>-1});if("init"===c&&(g=this.$selectableUl.find("#"+f.join("-selectable, #")+"-selectable"),h=this.$selectionUl.find("#"+f.join("-selection, #")+"-selection")),g.length>0){g.addClass("ms-selected").hide(),h.addClass("ms-selected").show(),i.prop("selected",!0),d.$container.find(d.elemsSelector).removeClass("ms-hover");var j=d.$selectableUl.children(".ms-optgroup-container");if(j.length>0){j.each(function(){var b=a(this).find(".ms-elem-selectable");b.length===b.filter(".ms-selected").length&&a(this).find(".ms-optgroup-label").hide()});var k=d.$selectionUl.children(".ms-optgroup-container");k.each(function(){var b=a(this).find(".ms-elem-selection");b.filter(".ms-selected").length>0&&a(this).find(".ms-optgroup-label").show()})}else if(d.options.keepOrder&&"init"!==c){var l=d.$selectionUl.find(".ms-selected");l.length>1&&l.last().get(0)!=h.get(0)&&h.insertAfter(l.last())}"init"!==c&&(e.trigger("change"),"function"==typeof d.options.afterSelect&&d.options.afterSelect.call(this,b))}},deselect:function(b){"string"==typeof b&&(b=[b]);var c=this,d=this.$element,e=a.map(b,function(a){return c.sanitize(a)}),f=this.$selectableUl.find("#"+e.join("-selectable, #")+"-selectable"),g=this.$selectionUl.find("#"+e.join("-selection, #")+"-selection").filter(".ms-selected").filter(":not(."+c.options.disabledClass+")"),h=d.find("option").filter(function(){return a.inArray(this.value,b)>-1});if(g.length>0){f.removeClass("ms-selected").show(),g.removeClass("ms-selected").hide(),h.prop("selected",!1),c.$container.find(c.elemsSelector).removeClass("ms-hover");var i=c.$selectableUl.children(".ms-optgroup-container");if(i.length>0){i.each(function(){var b=a(this).find(".ms-elem-selectable");b.filter(":not(.ms-selected)").length>0&&a(this).find(".ms-optgroup-label").show()});var j=c.$selectionUl.children(".ms-optgroup-container");j.each(function(){var b=a(this).find(".ms-elem-selection");0===b.filter(".ms-selected").length&&a(this).find(".ms-optgroup-label").hide()})}d.trigger("change"),"function"==typeof c.options.afterDeselect&&c.options.afterDeselect.call(this,b)}},select_all:function(){var b=this.$element,c=b.val();if(b.find('option:not(":disabled")').prop("selected",!0),this.$selectableUl.find(".ms-elem-selectable").filter(":not(."+this.options.disabledClass+")").addClass("ms-selected").hide(),this.$selectionUl.find(".ms-optgroup-label").show(),this.$selectableUl.find(".ms-optgroup-label").hide(),this.$selectionUl.find(".ms-elem-selection").filter(":not(."+this.options.disabledClass+")").addClass("ms-selected").show(),this.$selectionUl.focus(),b.trigger("change"),"function"==typeof this.options.afterSelect){var d=a.grep(b.val(),function(b){return a.inArray(b,c)<0});this.options.afterSelect.call(this,d)}},deselect_all:function(){var a=this.$element,b=a.val();a.find("option").prop("selected",!1),this.$selectableUl.find(".ms-elem-selectable").removeClass("ms-selected").show(),this.$selectionUl.find(".ms-optgroup-label").hide(),this.$selectableUl.find(".ms-optgroup-label").show(),this.$selectionUl.find(".ms-elem-selection").removeClass("ms-selected").hide(),this.$selectableUl.focus(),a.trigger("change"),"function"==typeof this.options.afterDeselect&&this.options.afterDeselect.call(this,b)},sanitize:function(a){var b,c,d=0;if(0==a.length)return d;for(var e=0,b=0,e=a.length;b<e;b++)c=a.charCodeAt(b),d=(d<<5)-d+c,d|=0;return d}},a.fn.multiSelect=function(){var c=arguments[0],d=arguments;return this.each(function(){var e=a(this),f=e.data("multiselect"),g=a.extend({},a.fn.multiSelect.defaults,e.data(),"object"==typeof c&&c);f||e.data("multiselect",f=new b(this,g)),"string"==typeof c?f[c](d[1]):f.init()})},a.fn.multiSelect.defaults={keySelect:[32],selectableOptgroup:!1,disabledClass:"disabled",dblClick:!1,keepOrder:!1,cssClass:""},a.fn.multiSelect.Constructor=b,a.fn.insertAt=function(a,b){return this.each(function(){0===a?b.prepend(this):b.children().eq(a-1).after(this)})}}(window.jQuery);