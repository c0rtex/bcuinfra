var app=angular.module("styleGuide",[]);app.controller("styleGuideController",[function(){$(".fa").popover()}]),app.directive("selector",[function(){return{link:function(a,b){$(b).click(function(){$(b).hasClass("checked")?$(b).removeClass("checked"):$(b).addClass("checked")})}}}]),app.directive("benefitsSlider",[function(){return{restrict:"A",link:function(a,b){function c(a){var b;return g.each(function(c){$(this).attr("id")==a&&(b=c)}),b}function d(){var a=$(".benefits-slider-icon.benefits-slider-active").parent().parent().attr("id");return $(".benefits-slider-active").removeClass(j),a}function e(a){$("style[data-benefits-slider]").remove(),$("head").append("<style data-benefits-slider>.benefits-slider-carousel:before,.benefits-slider-carousel:after{ left: "+($(a).offset().left-$(".benefits-slider-carousel").offset().left+$(a).width()/2)+"px}</style>")}function f(a){var b=g.get(a),c=h.get(a);k=a,$(b).find(".benefits-slider-icon").first().addClass(j),$(c).addClass(j),e(b),$(".benefits-slider-index").text(a+1+" of "+i)}var g=$(".benefits-slider-circle-nav>div"),h=$(".benefits-slider-carousel>.row"),i=g.length,j="benefits-slider-active",k=0;$(".benefits-slider-circle-nav>div").each(function(a){$(this).prop("id","benefits-slider-circle-"+a)}),$(window).resize(function(){var a=g.get(k);e(a)}),$(".benefits-slider-index").text("1 of "+i),$(".benefits-slider-arrow.fa-chevron-left").click(function(){var a,b,e;b=d(),a=c(b),e=a-1,e<0&&(e=i-1),f(e)}),$(".benefits-slider-arrow.fa-chevron-right").click(function(){var a,b,e;b=d(),a=c(b),e=a+1,e>i-1&&(e=0),f(e)}),$(".benefits-slider-circle-nav>div").click(function(){var a=$(this).attr("id"),b=c(a);d(),f(b)})}}}]),app.directive("breadcrumb",["$document","$state",function(a,b){return{restrict:"A",templateUrl:"/content/themes/ncoa/resources/views/directives/breadcrumb/breadcrumb.html",link:function(a,c,d){a.pages=["Basics","Health","Household","Finances","Results"],a.currentState=b.current.name.split(".")[1],a.hideBreadCrumbs="results"==b.current.name.split(".")[1]||"initial-results"==b.current.name.split(".")[1],a.$on("$stateChangeSuccess",function(){a.hideBreadCrumbs="results"==b.current.name.split(".")[1]||"initial-results"==b.current.name.split(".")[1]})}}}]),app.directive("ncoaCarousel",[function(){return{link:function(a,b){$(".currItem").html("1"),$(".currTotal").html($(".ncoa-carousel-container .item").length),$(b).slick({autoplay:!0,autoplaySpeed:5e3,dots:!1,infinite:!0,speed:1e3,slidesToShow:3,slidesToScroll:3,nextArrow:'<span class="fa fa-chevron-right" aria-hidden="true"></span>',prevArrow:'<span class="fa fa-chevron-left" aria-hidden="true"></span>',responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!1,dots:!1,appendArrows:$(b)}},{breakpoint:1e3,settings:{slidesToShow:2,slidesToScroll:2,appendArrows:$(".controls")}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,appendArrows:$(".controls")}}]}),$(b).on("afterChange",function(a,b,c,d){$(".currItem").html(c+1)})}}}]),app.directive("grid",[function(){return{restrict:"E",scope:{title:"@",description:"@"},templateUrl:"/content/themes/ncoa/resources/views/directives/grid/grid-tpl.html",link:function(a,b,c){}}}]),app.directive("ncoaLoader",function(){return{restrict:"E",templateUrl:"/content/themes/ncoa/resources/views/directives/loader/loader.html",link:function(a,b,c){}}}),app.directive("medicationSelector",[function(){return{restrict:"E",scope:{},templateUrl:"/content/themes/ncoa/resources/views/directives/med-selector/medication-selector.html",link:function(a,b){$("#multiselect").multiSelect({selectableHeader:"<p class='bold'>Available Medications <i class='fa fa-question-circle' aria-hidden='true'></i></p><input type='text' class='form-control' autocomplete='off' placeholder='Search...'>",selectionHeader:"<span class='h4'>My Medication List</span><p>Below are the medications you have selected</p>",selectableFooter:"<button class='btn btn-secondary add' disabled>Add to My List</button>",selectionFooter:"<button class='btn btn-secondary remove' disabled>Remove from My List</button>",afterInit:function(a){var b=this,c=b.$selectableUl.prev(),d="#"+b.$container.attr("id")+" .ms-elem-selectable:not(.ms-selected)";b.qs1=c.quicksearch(d).on("keydown",function(a){if(40===a.which)return b.$selectableUl.focus(),!1})},afterSelect:function(){this.qs1.cache(),$(".ms-selectable .ms-list .selected").removeClass("selected"),$(".ms-selectable .add").attr("disabled",!0)},afterDeselect:function(a){this.qs1.cache(),$(".ms-selectable .ms-list .selected").removeClass("selected"),$(".ms-selection .remove").attr("disabled",!0)}}),$(".ms-selectable").on("click","button.add",function(){var a=$(".ms-selectable .ms-list .selected span").map(function(){return $(this).html()}).get();$("#multiselect").multiSelect("select",a)}),$(".ms-selection").on("click","button.remove",function(){var a=$(".ms-selection .ms-list .selected span").map(function(){return $(this).html()}).get();$("#multiselect").multiSelect("deselect",a)})}}}]),app.directive("ncoaFooter",["$http",function(a){return{restrict:"E",scope:{url:"@"},link:function(b,c){a.get(b.url).then(function(a){console.log(a.data)}),$.ajax({url:b.url,context:document.body}).success(function(a){console.log(a)})}}}]),app.directive("ncoaForm",[function(){return{restrict:"A",link:function(a,b){a.processForm=function(a,b){console.log(a),b.preventDefault()}}}}]),app.directive("pageSwitch",["$state","Income","$filter",function(a,b,c){return{link:function(b,d){b.preState=a.current.data.prev,b.nextState=a.current.data.next,b.switchPage=function(b){a.go(b)},b.$on("$stateChangeSuccess",function(){b.preState="data"in a.current?a.current.data.prev:"",b.nextState="data"in a.current?a.current.data.next:"",b.currentState=a.current.name.split(".")[1],b.isResults="results"==a.current.name.split(".")[1],b.showOptions="results"==a.current.name.split(".")[1]||"initial-results"==a.current.name.split(".")[1],document.querySelector(".page-wrapper h1")&&document.querySelector(".page-wrapper h1").scrollIntoView()}),b.$on("$stateChangeStart",function(d,e,f,g,h,i){var j=c("filter")(b.questionnaire.incomes,{selected:!0}),k=c("filter")(b.questionnaire.assets,{selected:!0});"questionnaire.finances-income"==g.name&&"questionnaire.finances-income-grid"==e.name&&0==j.length?(d.preventDefault(),a.transitionTo("questionnaire.finances-assets")):"questionnaire.finances-assets"==g.name&&"questionnaire.finances-income-grid"==e.name&&0==j.length?(d.preventDefault(),a.transitionTo("questionnaire.finances-income")):"questionnaire.finances-assets"==g.name&&"questionnaire.finances-assets-grid"==e.name&&0==k.length?(d.preventDefault(),a.transitionTo("questionnaire.loader")):"questionnaire.results"==g.name&&"questionnaire.finances-assets-grid"==e.name&&0==k.length?(d.preventDefault(),a.transitionTo("questionnaire.finances-assets")):"questionnaire.results"==g.name&&"questionnaire.loader"==e.name&&0!=k.length?(d.preventDefault(),a.transitionTo("questionnaire.finances-assets-grid")):"questionnaire.results"==g.name&&"questionnaire.loader"==e.name&&0==k.length&&(d.preventDefault(),a.transitionTo("questionnaire.finances-assets"))})}}}]),app.directive("profile",["prescreen","$state",function(a,b){return{restrict:"A",templateUrl:"/content/themes/ncoa/resources/views/directives/profile/profile.html",link:function(c,d,e){c.screenData=a,c.showOptions="results"==b.current.name.split(".")[1]||"initial-results"==b.current.name.split(".")[1]}}}]),app.directive("slideDown",[function(){return{link:function(a,b){$(b).click(function(){$(b).find(".programs-container").slideToggle(),$(b).toggleClass("active")})}}}]),app.directive("textSizeChanger",["$document","localStorageService",function(a,b){return{restrict:"E",templateUrl:"/content/themes/ncoa/resources/views/directives/text-size-changer/text-size-changer.html",scope:{min:"@",mid:"@",max:"@",unit:"@"},link:function(c,d,e){function f(e){switch(a[0].body.style.fontSize=e+c.unit,$(d).addClass(e),e){case"18":c.sel="min";break;case"20":c.sel="mid";break;default:c.sel="max"}b.set("TextSize",e)}var g=b.get("TextSize");c.sel="min",g&&f(g),c.changeSize=f}}}]),app.directive("yearDrop",function(){function a(a,b){for(var c=(new Date).getFullYear(),d=[],e=0;e<b;e++)d.push(c-e);return d}return{restrict:"E",template:'<select class="form-control inline" name="dob-year" ng-model="prescreen.year" ng-options="y for y in years"></select>',link:function(b,c,d){b.years=a(+d.offset,+d.range),b.prescreen.year=b.years[66]}}}),app.directive("stateSelection",function(){return{restrict:"A",link:function(a,b,c){a.stateChange=function(){"TX"==a.mapState?$("#map_base svg path#map_43").css({fill:"#1F3D7D"}):$("#map_base svg path#map_43").css({fill:"#1888de"}),"AL"==a.mapState?$("#map_base svg path#map_1").css({fill:"#1F3D7D"}):$("#map_base svg path#map_1").css({fill:"#1888de"})}}}}),app.directive("zipcode",["locationFinder","$filter","localStorageService",function(a,b,c){return{link:function(d,e){function f(a){"OK"==a.status&&"Undefined"!=a.results[0].address_components[0].short_name&&a.results[0].formatted_address.lastIndexOf("US")!=-1?(d.prescreen.zipcode=a.results[0].address_components[0].long_name,d.prescreen.zipcode_formatted=b("limitTo")(a.results[0].formatted_address,a.results[0].formatted_address.lastIndexOf(","),0),c.set("zipcode",a.results[0].address_components[0].long_name),d.isZipValid=!0,d.isEdit=!1):d.isZipValid=!1}d.regPattern="\\d{5}",d.isZipValid=!0,d.isEdit=!1,a.getLocation(c.get("zipcode")).success(function(a,b,c,d){f(a)}),$(e).focusout(function(){a.getLocation($(this).val()).success(function(a,b,c,d){f(a)})}),d.resetZip=function(){d.isEdit=!0,$("#zipcode").focus()}}}}]);